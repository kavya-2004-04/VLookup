<!-- <!DOCTYPE html>
<html>
<head>
  <title>Admin Panel - Arah Infotech</title>
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body class="p-4">
  <h2>Add New Job Opening</h2>
  <form id="jobForm" class="mb-4">
    <input type="text" id="title" placeholder="Job Title" class="form-control mb-2" required>
    <textarea id="description" placeholder="Job Description" class="form-control mb-2" required></textarea>
    <input type="text" id="location" placeholder="Location" class="form-control mb-2" required>
    <button type="submit" class="btn btn-success">Add Job</button>
  </form>

  <h3>Current Openings</h3>
  <ul id="jobList"></ul>

  <script src="admin.js"></script>
</body>
</html> -->



<!DOCTYPE html>
<html lang="en">
<head>
  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getFirestore, collection, getDocs, addDoc, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBiYs7FoNkZoCGISsbpUW_VTHJ3dLssheo",
    authDomain: "vlookup-eb2ae.firebaseapp.com",
    projectId: "vlookup-eb2ae",
    storageBucket: "vlookup-eb2ae.appspot.com",
    messagingSenderId: "41494813156",
    appId: "1:41494813156:web:6b98657c5c1469769f4ff1",
    measurementId: "G-1PBVX0QKRE"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  window.db = db;
  window.fs = { collection, getDocs, addDoc, deleteDoc, doc };
</script>

  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Admin - Post Jobs</title>
  <link rel="stylesheet" href="/admin/admin_career/admin_career.css">
  <!-- <link rel="stylesheet" href="/assets/css/main.css"> -->
</head>
<body class="contact-page">
  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container position-relative d-flex align-items-center">

      <!-- <a href="index.html" class="logo d-flex align-items-center me-auto">
         <img src="assets/img/logo1.png" alt="logo">
        <h1 class="sitename">Arah Infotech</h1>
      </a> -->

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="/index.html">Home</a></li>
          <li><a href="/about_us.html">About</a></li>
          <li><a href="/service.html">Services</a></li>
          <li><a href="/career.html">Careers</a></li>
          <li><a href="/contact_us.html">Contact</a></li>
          
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      
    </div>
  </header>
  <h2>Add Job Opening</h2>
  <form id="jobForm">
    <input type="text" id="title" placeholder="Job Title" required>
    <input type="text" id="experience" placeholder="Experience (e.g. 2-4 years)" required>
    <input type="text" id="skills" placeholder="Skills (comma-separated)" required>
    <input type="text" id="job_description" placeholder="Job Description" required>
    <input type="text" id="location" placeholder="Location" required>
    <button type="submit">Add Job</button>
  </form>

  <h3>Current Jobs</h3>
  <p id="noJobsMessage" style="display:none;">Currently, there are no jobs available.</p>
  <ul id="jobList"></ul>

  <!--<script src="/admin/admin_career/admin_career.js"></script>-->
<script type="module">
  const jobForm = document.getElementById("jobForm");
  const jobList = document.getElementById("jobList");
  const noJobsMessage = document.getElementById("noJobsMessage");

  const { collection, getDocs, addDoc, deleteDoc, doc } = window.fs;
  const jobsRef = collection(window.db, "jobs");

  async function loadJobs() {
    const snapshot = await getDocs(jobsRef);
    jobList.innerHTML = "";
    if (snapshot.empty) {
      noJobsMessage.style.display = "block";
      return;
    }
    noJobsMessage.style.display = "none";
    snapshot.forEach(docSnap => {
      const job = docSnap.data();
      const li = document.createElement("li");
      li.innerHTML = `
        <div>
          <b>${job.title}</b>
          <p>Experience: ${job.experience}</p>
          <p>Location: ${job.location}</p>
          <p>Skills: ${job.skills}</p>
          <p>Description: ${job.job_description}</p>
        </div>
        <div class="job-actions">
          <button onclick="deleteJob('${docSnap.id}')">Remove</button>
        </div>`;
      jobList.appendChild(li);
    });
  }

  window.deleteJob = async id => {
    await deleteDoc(doc(window.db, "jobs", id));
    loadJobs();
  };

  jobForm.addEventListener("submit", async e => {
    e.preventDefault();
    const job = {
      title: document.getElementById("title").value,
      experience: document.getElementById("experience").value,
      skills: document.getElementById("skills").value,
      job_description: document.getElementById("job_description").value,
      location: document.getElementById("location").value
    };
    await addDoc(jobsRef, job);
    jobForm.reset();
    loadJobs();
  });

  loadJobs();
</script>

</body>
</html>
